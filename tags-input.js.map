{"version":3,"sources":["src/tags-input.js"],"names":[],"mappings":"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","file":"tags-input.js","sourceRoot":"src","sourcesContent":["const BACKSPACE = 8,\r\n\tTAB = 9,\r\n\tENTER = 13,\r\n\tLEFT = 37,\r\n\tRIGHT = 39,\r\n\tDELETE = 46,\r\n\tCOMMA = 188;\r\n\r\nconst SEPERATOR = ',';\r\n\r\nconst COPY_PROPS = 'placeholder pattern spellcheck autocomplete autocapitalize autofocus accessKey accept lang minLength maxLength required'.split(' ');\r\n\r\nexport default function tagsInput(input) {\r\n\tfunction createElement(type, name, text, attributes) {\r\n\t\tlet el = document.createElement(type);\r\n\t\tif (name) el.className = name;\r\n\t\tif (text) el.textContent = text;\r\n\t\tfor (let key in attributes) {\r\n\t\t\tel.setAttribute(`data-${key}`, attributes[key]);\r\n\t\t}\r\n\t\treturn el;\r\n\t}\r\n\r\n\tfunction $(selector, all) {\r\n\t\treturn all===true ? Array.prototype.slice.call(base.querySelectorAll(selector)) : base.querySelector(selector);\r\n\t}\r\n\r\n\tfunction getValue() {\r\n\t\treturn $('.tag', true)\r\n\t\t\t.map( tag => tag.textContent )\r\n\t\t\t.concat(base.input.value || [])\r\n\t\t\t.join(SEPERATOR);\r\n\t}\r\n\r\n\tfunction setValue(value) {\r\n\t\t$('.tag', true).forEach( t => base.removeChild(t) );\r\n\t\tsavePartialInput(value);\r\n\t}\r\n\r\n\tfunction save() {\r\n\t\tinput.value = getValue();\r\n\t\tinput.dispatchEvent(new Event('change'));\r\n\t}\r\n\r\n\t// Return false if no need to add a tag\r\n\tfunction addTag(text) {\r\n\t\t// Add multiple tags if the user pastes in data with SEPERATOR already in it\r\n\t\tif (~text.indexOf(SEPERATOR)) text = text.split(SEPERATOR);\r\n\t\tif (Array.isArray(text)) return text.forEach(addTag);\r\n\r\n\t\tlet tag = text && text.trim();\r\n\t\t// Ignore if text is empty\r\n\t\tif (!tag) return false;\r\n\r\n\t\t// For duplicates, briefly highlight the existing tag\r\n\t\tif (!input.getAttribute('duplicates')) {\r\n\t\t\tlet exisingTag = $(`[data-tag=\"${tag}\"]`);\r\n\t\t\tif (exisingTag) {\r\n\t\t\t\texisingTag.classList.add('dupe');\r\n\t\t\t\tsetTimeout( () => exisingTag.classList.remove('dupe') , 100);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbase.insertBefore(\r\n\t\t\tcreateElement('span', 'tag', tag, { tag }),\r\n\t\t\tbase.input\r\n\t\t);\r\n\t}\r\n\r\n\tfunction select(el) {\r\n\t\tlet sel = $('.selected');\r\n\t\tif (sel) sel.classList.remove('selected');\r\n\t\tif (el) el.classList.add('selected');\r\n\t}\r\n\r\n\tfunction setInputWidth() {\r\n\t\tlet last = $('.tag',true).pop(),\r\n\t\t\tw = base.offsetWidth;\r\n\t\tif (!w) return;\r\n\t\tbase.input.style.width = Math.max(\r\n\t\t\tw - (last ? (last.offsetLeft+last.offsetWidth) : 5) - 5,\r\n\t\t\tw/4\r\n\t\t) + 'px';\r\n\t}\r\n\r\n\tfunction savePartialInput(value) {\r\n\t\tif (typeof value!=='string' && !Array.isArray(value)) {\r\n\t\t\t// If the base input does not contain a value, default to the original element passed\r\n\t\t\tvalue = base.input.value;\r\n\t\t}\r\n\t\tif (addTag(value)!==false) {\r\n\t\t\tbase.input.value = '';\r\n\t\t\tsave();\r\n\t\t\tsetInputWidth();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction refocus(e) {\r\n\t\tif (e.target.classList.contains('tag')) select(e.target);\r\n\t\tif (e.target===base.input) return select();\r\n\t\tbase.input.focus();\r\n\t\te.preventDefault();\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction caretAtStart(el) {\r\n\t\ttry {\r\n\t\t\treturn el.selectionStart === 0 && el.selectionEnd === 0;\r\n\t\t}\r\n\t\tcatch(e) {\r\n\t\t\treturn el.value === '';\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tlet base = createElement('div', 'tags-input'),\r\n\t\tsib = input.nextSibling;\r\n\r\n\tinput.parentNode[sib?'insertBefore':'appendChild'](base, sib);\r\n\r\n\tinput.style.cssText = 'position:absolute;left:0;top:-99px;width:1px;height:1px;opacity:0.01;';\r\n\tinput.tabIndex = -1;\r\n\r\n\tlet inputType = input.getAttribute('type');\r\n\tif (!inputType || inputType === 'tags') {\r\n\t\tinputType = 'text';\r\n\t}\r\n\tbase.input = createElement('input');\r\n\tbase.input.setAttribute('type', inputType);\r\n\tCOPY_PROPS.forEach( prop => {\r\n\t\tif (input[prop]!==base.input[prop]) {\r\n\t\t\tbase.input[prop] = input[prop];\r\n\t\t\ttry { delete input[prop]; }catch(e){}\r\n\t\t}\r\n\t});\r\n\tbase.appendChild(base.input);\r\n\r\n\tinput.addEventListener('focus', () => {\r\n\t\tbase.input.focus();\r\n\t});\r\n\r\n\tinput.addEventListener('change', () => {\r\n\t\tlet currentValue = getValue();\r\n\t\tif(currentValue !== input.value) {\r\n\t\t\tsetValue(input.value);\r\n\t\t\tbase.input.focus();\r\n\t\t}\r\n\t});\r\n\r\n\tbase.input.addEventListener('focus', () => {\r\n\t\tbase.classList.add('focus');\r\n\t\tselect();\r\n\t});\r\n\r\n\tbase.input.addEventListener('blur', () => {\r\n\t\tbase.classList.remove('focus');\r\n\t\tselect();\r\n\t\tsavePartialInput();\r\n\t});\r\n\r\n\tbase.input.addEventListener('keydown', e => {\r\n\t\tlet el = base.input,\r\n\t\t\tkey = e.keyCode || e.which,\r\n\t\t\tselectedTag = $('.tag.selected'),\r\n\t\t\tatStart = caretAtStart(el),\r\n\t\t\tlast = $('.tag',true).pop();\r\n\r\n\t\tsetInputWidth();\r\n\r\n\t\tif (key===ENTER || key===COMMA || key===TAB) {\r\n\t\t\tif (!el.value && key!==COMMA) return;\r\n\t\t\tsavePartialInput();\r\n\t\t}\r\n\t\telse if (key===DELETE && selectedTag) {\r\n\t\t\tif (selectedTag.nextSibling!==base.input) select(selectedTag.nextSibling);\r\n\t\t\tbase.removeChild(selectedTag);\r\n\t\t\tsetInputWidth();\r\n\t\t\tsave();\r\n\t\t}\r\n\t\telse if (key===BACKSPACE) {\r\n\t\t\tif (selectedTag) {\r\n\t\t\t\tselect(selectedTag.previousSibling);\r\n\t\t\t\tbase.removeChild(selectedTag);\r\n\t\t\t\tsetInputWidth();\r\n\t\t\t\tsave();\r\n\t\t\t}\r\n\t\t\telse if (last && atStart) {\r\n\t\t\t\tselect(last);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (key===LEFT) {\r\n\t\t\tif (selectedTag) {\r\n\t\t\t\tif (selectedTag.previousSibling) {\r\n\t\t\t\t\tselect(selectedTag.previousSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!atStart) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tselect(last);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (key===RIGHT) {\r\n\t\t\tif (!selectedTag) return;\r\n\t\t\tselect(selectedTag.nextSibling);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn select();\r\n\t\t}\r\n\r\n\t\te.preventDefault();\r\n\t\treturn false;\r\n\t});\r\n\r\n\t// Proxy \"input\" (live change) events , update the first tag live as the user types\r\n\t// This means that users who only want one thing don't have to enter commas\r\n\tbase.input.addEventListener('input', () => {\r\n\t\tinput.value = getValue();\r\n\t\tinput.dispatchEvent(new Event('input'));\r\n\t});\r\n\r\n\t// One tick after pasting, parse pasted text as CSV:\r\n\tbase.input.addEventListener('paste', () => setTimeout(savePartialInput, 0));\r\n\r\n\tbase.addEventListener('mousedown', refocus);\r\n\tbase.addEventListener('touchstart', refocus);\r\n\r\n\tbase.setValue = setValue;\r\n\tbase.getValue = getValue;\r\n\r\n\t// Add tags for existing values\r\n\tsavePartialInput(input.value);\r\n}\r\n\r\n// make life easier:\r\ntagsInput.enhance = tagsInput.tagsInput = tagsInput;\r\n"]}